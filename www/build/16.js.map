{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ToastController, AlertController } from 'ionic-angular';\nimport {PrloginProvider}from '../../providers/prlogin/prlogin';\nimport { User } from '../../providers/providers';\nimport {PrdireccionEntregaProvider}from '../../providers/prdireccion-entrega/prdireccion-entrega';\nimport {PrhoraEntregaProvider}from '../../providers/prhora-entrega/prhora-entrega';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n  cuenta:any={\n  correo:'',\n  pass:'',\n  token:'',\n  serial:''};\n  result_login:any;\n  result_direccion_entrega:any;\n  result_direccion_entrega_2:any;\n  result_hora_entrega:any;\n  constructor(public navCtrl: NavController,public user: User,public toastCtrl: ToastController,public prlogin:PrloginProvider, public direccion_entrega:PrdireccionEntregaProvider, public alertCtrl:AlertController, public pr_hora_entrega:PrhoraEntregaProvider) {\n    this.get_hora_entrega();\n  }\n  // Attempt to login in through our User service\n  public login_manual(){\n    let login=this.cuenta.correo;\n    let pass= this.cuenta.pass;\n    let token=this.prlogin.getToken();\n    let serial=this.prlogin.get_serial();\n    alert(token+' el serial '+ serial);\n     this.prlogin.login_manual(login,pass,token,serial).subscribe(\n        login => {\n        this.result_login=login;\n         let result=this.result_login;\n         let mensaje=result.mensaje;\n         let data=result.data;\n         console.log(data);\n         if(mensaje=='NO Existe Usuario') {\n           let mensaje='Login y contraseÃ±a no validos';\n           this.loading_toast(mensaje);\n         }else{\n            let id_nivel;\n            let id_usuario;\n            for(let value of data) {\n             id_nivel=value.id_nivel;\n             id_usuario=value.id_usuario;\n            }\n            this.prlogin.set_id_usuario(id_usuario);\n           if(id_nivel==1 || id_nivel==2|| id_nivel==3) {\n             let mensaje='Debes ser un cliente para iniciar sesion';\n             this.loading_toast(mensaje);\n           }else{\n             localStorage.setItem('delivery_cliente',JSON.stringify(data))\n             this.prlogin.set_inicio_sesion(data);\n             /*busca la direccion de entrega, si existe lo pasa al home, sino existe llama al modulo direccion entrega*/\n              this.direccion_entrega.get_direccion_entrega_activo(id_usuario).subscribe(\n                 direccion_entrega => {\n                   let direccion_entrega_2=direccion_entrega;\n                   let mensaje=direccion_entrega_2.mensaje;\n                   console.log(direccion_entrega_2);\n                    if(mensaje=='NO existe direccion de entrega') {\n                      console.log(this.result_direccion_entrega);\n                      let info='Informacion';\n                      let msg='Vamos a configurar la direccion de entrega';\n                      this.show_alert(info,msg);\n                    }else{\n                      let data=direccion_entrega_2.data;\n                      this.direccion_entrega.set_variable_direccion_entrega(data);\n                       localStorage.setItem('delivery_direccion_entrega_activa',JSON.stringify(data));\n                      this.get_direccion_entrega(id_usuario);\n                      /*****************/\n                      this.navCtrl.setRoot('HomePage');\n                    }\n                 },\n                 err => {console.log(\"NO EXISTE REGISTRO\");\n                 },\n               );\n\n           }\n           console.log('entra en el else');\n         }\n        },\n        err => {console.log(err);\n        },\n      );\n  }\n  get_hora_entrega(){\n   this.pr_hora_entrega.get_hora_entrega().subscribe(\n      pr_hora_entrega => {\n        this.result_hora_entrega=pr_hora_entrega;\n         console.log(\"REGISTRO hora de entrega\");\n         this.pr_hora_entrega.set_variable_result_hora_entrega(this.result_hora_entrega);\n      },\n      err => {console.log(\"NO EXISTE REGISTRO\");\n      },\n    );\n  }\n  get_direccion_entrega(item){\n    /*esta direccion son todas las direcciones registradas por el usuario para mostrarlas en el pedido procesado*/\n    let id_usuario=item;\n     this.direccion_entrega.get_direccion_entrega(id_usuario).subscribe(\n        direccion_entrega => {\n          let result_direccion_entrega=direccion_entrega;\n          let data=result_direccion_entrega.data;\n           console.log(data);\n           localStorage.setItem('delivery_direccion_entrega',JSON.stringify(data));\n           this.direccion_entrega.set_variable_result_direccion_entrega_todas(data);\n        },\n        err => {console.log(\"NO EXISTE REGISTRO\");\n        },\n      );\n  }\n  loading_toast(valor){\n    let toast = this.toastCtrl.create({\n        message: valor,\n        duration: 3000,\n        position: 'middle'\n      });\n      toast.present();\n  }\n  show_alert(titulo,mensaje){\n    let alert = this.alertCtrl.create({\n    title: titulo,\n    subTitle: mensaje,\n    buttons: ['OK']\n    });\n    alert.present();\n    this.navCtrl.setRoot('DireccionEntregaPage');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}